"use strict";(globalThis.webpackChunk_github_ui_github_ui=globalThis.webpackChunk_github_ui_github_ui||[]).push([["packages_commits_shared_use-load-deferred-commit-data_ts-packages_commits_shared_Commits_tsx--f64111"],{30617:(e,t,i)=>{i.d(t,{X:()=>l});var n=i(78314),a=i(25407),o=i(76648),s=i(96379),r=i(96540);function l(){let e=(0,n.t)(),{commit:t}=(0,o.B)(),i=`/${(0,a.QU3)(e.ownerLogin)}/${(0,a.QU3)(e.name)}/commit_comment`,l=`${i}/create`,m=(0,r.useCallback)(async(e,i,n)=>{let a=new FormData;a.append("commit_id",t.oid),a.append("comment[body]",e),i&&n&&(a.append("path",i),a.append("position",n.toString()));let o=await (0,s.DI)(l,{method:"POST",body:a});return o.ok?{error:null,comment:(await o.json()).comment}:{error:Error("Failed to add comment"),comment:null}},[t.oid,l]),d=(0,r.useCallback)(async(e,t)=>{let n=new FormData;n.append("_method","put"),n.append("commit_comment[id]",t.id.toString()),n.append("commit_comment[body]",e),n.append("commit_comment[bodyVersion]",t.bodyVersion);let a=await (0,s.DI)(i,{method:"POST",body:n});if(!a.ok)return{error:Error("Failed to edit comment"),updatedFields:null};{let e=await a.json();return{error:null,updatedFields:{body:e.source,bodyVersion:e.bodyVersion,htmlBody:e.body}}}},[i]),c=(0,r.useCallback)(async e=>{let t=new FormData;return(t.append("_method","delete"),t.append("commit_comment[id]",e),(await (0,s.DI)(i,{method:"POST",body:t})).ok)?"success":"error"},[i]),u=(0,r.useCallback)(async(e,t)=>{let n=new FormData;return(n.append("_method","put"),n.append("classifier",t),(await (0,s.DI)(`${i}/${e}/minimize`,{method:"POST",body:n,headers:{Accept:"application/json"}})).ok)?"success":"error"},[i]),h=(0,r.useCallback)(async e=>{let t=new FormData;return(t.append("_method","put"),(await (0,s.DI)(`${i}/${e}/unminimize`,{method:"POST",body:t,headers:{Accept:"application/json"}})).ok)?"success":"error"},[i]),p=(0,r.useMemo)(()=>({repository:{databaseId:e.id,nwo:`${e.ownerLogin}/${e.name}`,slashCommandsEnabled:!1},type:"commit",id:{id:t.oid}}),[e.id,e.name,e.ownerLogin,t.oid]);return(0,r.useMemo)(()=>({addComment:m,commentBoxSubject:p,editComment:d,deleteComment:c,hideComment:u,unhideComment:h}),[m,c,d,u,h,p])}},98783:(e,t,i)=>{i.d(t,{D:()=>a});var n=i(79634);function a(){return(0,n.X)()}},49245:(e,t,i)=>{i.d(t,{I:()=>m,p:()=>c});var n=i(25407),a=i(71315),o=i(96379),s=i(96540),r=i(28014),l=i(68534);function m({repo:e,commit:t,viewerCanReply:i,repoOwnerGlobalRelayId:a,getInlineCommentInfoByPathAndPosition:l}){let{addComments:m}=(0,r.B)();return(0,s.useCallback)((s,r)=>new Promise(async(c,u)=>{let[h,p]=s.split("::");if(!h||!p)return void u(Error("Invalid threadId"));if(!r){let n=l(h,Number(p));c(n?d(n,t,e,i,s,a):void 0);return}let f=await (0,o.lS)(`${(0,n.MLt)({owner:e.ownerLogin,repo:e.name,commitOid:t.oid,path:h,position:p})}${r?"&isRefetch=true":""}`);if(f.ok){let n=await f.json();m(n.comments,h,p),c(n.comments?d(n.comments,t,e,i,s,a):void 0)}else u(Error("Failed to fetch thread"))}),[m,t,l,e,i,a])}function d(e,t,i,n,a,o){return{commentsData:{comments:e.map(e=>c(e,t,i,o))},id:a,viewerCanReply:n}}function c(e,t,i,o){return{publishedAt:void 0,state:"",viewerRelationship:"",id:e.relayId,databaseId:e.id,body:e.body,bodyHTML:e.htmlBody,createdAt:e.createdAt,url:`${a.cg?.location.origin}${(0,n.$Qz)({owner:i.ownerLogin,repo:i.name,commitish:t.oid})}#${e.urlFragment}`,currentDiffResourcePath:`#${e.urlFragment}`,authorAssociation:e.authorAssociation?.toUpperCase(),author:{id:e.author.id,login:e.author.login,avatarUrl:e.author.avatarUrl,url:""},isHidden:e.isHidden,lastUserContentEdit:e.lastUserContentEdit,minimizedReason:e.minimizedReason,subjectType:"commit",viewerCanMinimize:e.viewerCanMinimize,viewerCanSeeMinimizeButton:e.viewerCanMinimize,viewerCanSeeUnminimizeButton:e.viewerCanMinimize,viewerCanDelete:e.viewerCanDelete,viewerCanUpdate:e.viewerCanUpdate,viewerCanReact:e.viewerCanReact,viewerCanReport:e.viewerCanReport,viewerCanReportToMaintainer:e.viewerCanReportToMaintainer,viewerCanBlockFromOrg:e.viewerCanBlockFromOrg,viewerCanUnblockFromOrg:e.viewerCanUnblockFromOrg,viewerDidAuthor:e.viewerDidAuthor,reactionGroups:e.reactionGroups,reference:{number:void 0,text:(0,l.F)(t.oid),author:{login:t.authors.length>0?t.authors[0]?.login??"":""}},repository:{id:i.id.toString(),isPrivate:i.private,name:i.name,owner:{id:o,login:i.ownerLogin,url:""}}}}},3536:(e,t,i)=>{i.d(t,{I:()=>l,d_:()=>m,wu:()=>r});var n=i(37285),a=i(96379),o=i(96540),s=i(4095);function r(e,t){let[i,r]=(0,o.useState)(s.UI);return(0,o.useEffect)(()=>{if(!e)return;let t=!1;return(async()=>{r(s.UI);let i=await (0,a.Sr)((0,n.RD)(e));if(!t)try{if(i.ok){let e=await i.json();e.loading=!1,e&&((0,n.Av)(e),r(e))}else r(s.Xx)}catch{r(s.Xx)}})(),function(){t=!0}},[e,t]),i}function l(e){let[t,i]=(0,o.useState)(void 0);return(0,o.useEffect)(()=>{e&&(async()=>{let t=await (0,a.Sr)((0,n.RD)(e));try{if(t.ok){let e=await t.json();e&&((0,n.Av)(e),i(e.data))}}catch{}})()},[e]),t}function m(e,t,i,n){let[r,l]=(0,o.useState)(s.UI),m=(0,o.useRef)([...Array(i)]),d=(0,o.useRef)(t);return(0,o.useEffect)(()=>{if(!e)return;let i=!1;async function n(t){let o=await (0,a.Sr)(`${e}?start_entry=${t}`);if(!i)try{if(o.ok){let e=await o.json();if(e){let t=0;for(let i=d.current;i<e.nextIndex;i++)m.current[i]=e.deferredCommits[t],t++;e.deferredCommits=m.current,e.loadMore&&d.current!==e.nextIndex?(d.current=e.nextIndex,e.error=!1,l(e),setTimeout(()=>n(e.nextIndex),0)):(d.current===e.nextIndex?e.error=!0:e.error=!1,l(e))}}else l(e=>({...e,loading:!1,error:!0,extraDiffEntries:m.current}))}catch{l(e=>({...e,loading:!1,deferredCommits:m.current}))}}return n(t),function(){i=!0}},[e,n,t]),(0,o.useEffect)(()=>{m.current=[],d.current=t},[e,n,t]),r}},68534:(e,t,i)=>{i.d(t,{F:()=>n});function n(e){return e.slice(0,7)}},83878:(e,t,i)=>{i.d(t,{N:()=>n});function n(e,t){return"d28fac7f18aeacb00d8ad3460a0a5a901617c2d4"===e&&0xf122a7===t}},10925:(e,t,i)=>{i.d(t,{H:()=>a});var n=i(76648);function a(e,t){let{csrf_tokens:i}=(0,n.B)();return i?.[e]?.[t]}},42257:(e,t,i)=>{i.d(t,{d:()=>s});var n=i(74848),a=i(99896);let o={ChecksStatusBadge:"AsyncChecksStatusBadge-module__ChecksStatusBadge--Ddd3K"};function s({status:e,oid:t,repo:i,badgeProps:s={},descriptionString:r=""}){let[l,m]=(0,a.ym)(t,i);return e?(0,n.jsx)(a.B6,{disablePopover:!1,size:"small",statusRollup:e,combinedStatus:l,descriptionText:r,onWillOpenPopup:m,buttonClassName:o.ChecksStatusBadge,...s}):null}try{s.displayName||(s.displayName="AsyncChecksStatusBadge")}catch{}},1117:(e,t,i)=>{i.d(t,{N:()=>ei,$:()=>en});var n=i(74848),a=i(96540),o=i(96760),s=i(78314),r=i(35898),l=i(71315),m=i(38621),d=i(69410),c=i(55847),u=i(90352),h=i(34164),p=i(21935),f=i(83878);let x={"commit-discussion-comments":"Comment-module__commit-discussion-comments--GlkCu","discussion-comments-rose":"Comment-module__discussion-comments-rose--JwtpK"};var y=i(24967),C=i(81945);let g=()=>(0,n.jsx)("div",{className:"d-flex gap-2",children:(0,n.jsx)("div",{className:"flex-1 border overflow-x-auto rounded-2 borderColor-muted color-shadow-small",children:(0,n.jsxs)("div",{className:"d-flex flex-column gap-2 m-3",children:[(0,n.jsxs)("div",{className:"d-flex flex-items-center gap-2",children:[(0,n.jsx)(C.O,{variant:"elliptical",height:"xl",width:"xl"}),(0,n.jsx)(C.O,{variant:"rounded",height:"sm",width:"150px"})]}),[void 0,void 0].map((e,t)=>(0,n.jsx)(C.O,{variant:"rounded",height:"sm",width:"random"},t)),(0,n.jsx)(y.e,{})]})})});try{g.displayName||(g.displayName="CommentLoading")}catch{}var w=i(26156),v=i(71073),j=i(23656),b=i(21086),N=i(38829),k=i(26076),I=i(19805),S=i(30617),_=i(49245),T=i(68534),A=i(8046),B=i(81034),R=i(88431);let D=(0,a.forwardRef)(({initialMarkdown:e,onCancel:t,onSave:i,referenceId:o,buttonText:s,commentContent:r},l)=>{let[m,d]=(0,a.useState)(!1),c=(0,a.useRef)(null),u=(0,a.useRef)(void 0),{commentBoxSubject:h}=(0,S.X)(),p=(0,a.useCallback)(()=>{},[]),{markdownBody:f,resetMarkdownBody:x,markdownValidationResult:y,handleMarkdownBodyChanged:C}=(0,B.x)({commentBoxRef:c,markdownComposerRef:l,onChange:p,onCancel:()=>{},referenceId:o});(0,a.useEffect)(()=>{e&&!f&&C(e)},[e]),(0,a.useEffect)(()=>{if(r&&u.current!==r){C(r),u.current=r;let e=window.setTimeout(()=>{c.current&&(c.current?.scrollIntoView(),c.current?.focus())},0);return()=>{window.clearTimeout(e)}}},[r]),(0,R.N)(()=>{if(c&&c.current){let e=window.setTimeout(()=>{c.current?.focus()},0);return()=>{window.clearTimeout(e)}}},[c]);let g=async()=>{d(!0),await i(f,x),d(!1)};return(0,n.jsx)(A.h,{ref:c,validationResult:y,disabled:m,onChange:e=>{C(e)},onCancel:()=>{C(""),t?.()},onSave:g,saveButtonText:s,saveButtonTrailingIcon:!1,value:f,teamHovercardsEnabled:!0,fileUploadsEnabled:!0,subject:h})});function E({comment:e,commitOid:t,onCancel:i,onUpdate:o}){let{editComment:s}=(0,S.X)(),r=(0,a.useRef)(null),l=async t=>{let i=await s(t,e);i.updatedFields&&o({...e,...i.updatedFields})};return(0,n.jsx)(D,{commitOid:t,initialMarkdown:e.body,ref:r,onSave:l,onCancel:i,referenceId:`${t}-${e.id}`,buttonText:"Update comment"})}D.displayName="CommitCommentEditor";try{E.displayName||(E.displayName="UpdateCommitComment")}catch{}function L({comments:e,commit:t,locked:i,deleteComment:a,updateComment:o,setNewCommentContent:s,repoOwnerGlobalRelayId:r}){return 0===e.length?null:(0,n.jsx)("div",{className:"d-flex flex-column gap-3",children:e.map(e=>(0,n.jsx)(O,{comment:e,commit:t,locked:i,deleteComment:a,updateComment:o,setNewCommentContent:s,repoOwnerGlobalRelayId:r},e.id))})}function O({comment:e,commit:t,locked:i,deleteComment:o,updateComment:r,setNewCommentContent:l,repoOwnerGlobalRelayId:m}){let d=(0,s.t)(),[c,u]=(0,a.useState)(!1),[h,p]=(0,a.useState)(e.isHidden),f=(0,a.useRef)(null),{deleteComment:x,hideComment:C,unhideComment:g}=(0,S.X)(),w=async()=>{let t=await x(e.id.toString());"canceled"!==t&&"error"!==t&&"success"===t&&o(e.id)},v=async t=>{let i=await C(e.id.toString(),t);"error"!==i&&"success"===i&&(r({...e,isHidden:!0,minimizedReason:t}),p(!0))},j=async()=>{let t=await g(e.id.toString());"error"!==t&&"success"===t&&(r({...e,isHidden:!1,minimizedReason:null}),p(!1))},b=t.authors.length>0?t.authors[0]?.login:"",N={...(0,_.p)(e,t,d,m),referenceText:(0,T.F)(t.oid)};return(0,n.jsxs)("div",{className:"border rounded-2",ref:f,id:e.urlFragment,tabIndex:-1,children:[(0,n.jsx)(M,{comment:N,commentAuthorLogin:e.author.login,commentSubjectAuthorLogin:b,commentSubjectType:"commit",avatarUrl:e.author.avatarUrl,isMinimized:h,editComment:()=>{u(!0)},onReplySelect:l,onMinimize:p,navigate:()=>{},hideComment:v,unhideComment:j,deleteComment:w,commentRef:f,showEditHistory:e.viewerCanReadUserContentEdits&&!!e.lastUserContentEdit,commitComment:e}),h?null:c?(0,n.jsx)("div",{className:"m-2",children:(0,n.jsx)(E,{comment:e,commitOid:t.oid,onUpdate:e=>{r(e),u(!1)},onCancel:()=>u(!1)})}):(0,n.jsxs)("div",{className:"d-flex flex-column m-3 gap-3",style:{gap:"12px"},children:[(0,n.jsx)("div",{className:"markdown-body","data-turbolinks":"false",children:(0,n.jsx)(k.G,{disabled:!1,verifiedHTML:e.htmlBody,markdownValue:e.body,onChange:()=>{},onLinkClick:()=>{},teamHovercardsEnabled:!0})}),(0,n.jsx)(a.Suspense,{fallback:(0,n.jsx)(y.e,{}),children:(0,n.jsx)(I.ReactionViewerRelayQueryComponent,{id:e.relayId,subjectLocked:i})})]})]})}function M({hideActions:e,...t}){let i,o,s=t.commitComment;return t.showEditHistory&&(i=(0,n.jsx)(a.Suspense,{fallback:null,children:(0,n.jsx)($,{id:s.relayId})}),o=(0,n.jsx)(P,{id:t.comment.id})),(0,n.jsx)(w.v,{lastEditedByMessage:o,editHistoryComponent:i,forceInlineAvatar:!0,...t,actions:e?void 0:(0,n.jsx)(v.p,{onSuccessfulBlock:()=>{setTimeout(()=>l.cg?.location.reload(),800)},...t})})}function $({id:e}){let t=(0,N.f)({id:e});return t?(0,n.jsx)(j.W,{editHistory:t}):null}function P({id:e}){let t=(0,N.f)({id:e});return t?(0,n.jsx)(b._,{editInformation:t}):null}try{L.displayName||(L.displayName="ExistingCommitComments")}catch{}try{O.displayName||(O.displayName="ExistingCommitComment")}catch{}try{M.displayName||(M.displayName="CommitCommentHeader")}catch{}try{$.displayName||($.displayName="CommitCommentHeaderEditHistory")}catch{}try{P.displayName||(P.displayName="CommitCommentHeaderLastEditedBy")}catch{}var F=i(25407),U=i(79634),H=i(96379),z=i(96665);function V({commitOid:e,locked:t,onClose:i}){let o=(0,s.t)(),{helpUrl:r}=(0,U.X)(),[l,m]=(0,a.useState)(!1),c=t?"Unlock":"Lock",u=async()=>{(await (0,H.DI)(`${(0,F.$Qz)({owner:o.ownerLogin,repo:o.name,commitish:e})}/lock`,{method:"PUT",headers:{Accept:"application/json"}})).ok?i(!0):m(!0)},h=async()=>{(await (0,H.lS)(`${(0,F.$Qz)({owner:o.ownerLogin,repo:o.name,commitish:e})}/unlock`,{method:"PUT",headers:{Accept:"application/json"}})).ok?i(!1):m(!0)};return(0,n.jsxs)(z.l,{onClose:()=>i(),width:"large",title:`${c} conversation on this commit`,footerButtons:[{content:`${c} conversation`,buttonType:"danger",sx:{width:"100%"},onClick:t?h:u}],children:[l&&(0,n.jsxs)(d.A,{className:"mb-2",variant:"danger",children:["There was an error ",c.toLocaleLowerCase(),"ing this conversation. Please try again."]}),(0,n.jsxs)("p",{children:[c,"ing the conversation means:"]}),(0,n.jsx)("ul",{className:"ml-4",children:t?(0,n.jsxs)("li",{children:[(0,n.jsx)("strong",{children:"Everyone"})," will be able to comment on this commit once more."]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("li",{children:["Other users ",(0,n.jsx)("strong",{children:"can\u2019t add new comments"})," to this commit."]}),o.isOrgOwned?(0,n.jsxs)("li",{children:["You and other members of teams with"," ",(0,n.jsx)("a",{href:`${r}/get-started/learning-about-github/access-permissions-on-github`,children:"write access"})," ","to this repository ",(0,n.jsx)("strong",{children:"can still leave comments"})," that others can see."]}):(0,n.jsxs)("li",{children:["You and other collaborators"," ",(0,n.jsx)("a",{href:`${r}/get-started/learning-about-github/access-permissions-on-github`,children:"with access"})," to this repository ",(0,n.jsx)("strong",{children:"can still leave comments"})," that others can see."]})]})}),(0,n.jsxs)("p",{className:"mb-0 mt-2",children:["You can always ",t?"lock":"unlock"," this commit again in the future."]})]})}try{V.displayName||(V.displayName="LockConversationDialog")}catch{}var X=i(21067),Q=i(60912),K=i(61423),G=i(11738),W=i(81156),Y=i(77430);function q({commitOid:e,onAddComment:t,onExpandCommentEditor:i,newCommentContent:o,canComment:s,locked:r,repoArchived:d,avatarURL:c}){let u=(0,X.M3)(),{addComment:h}=(0,S.X)(),p=(0,a.useRef)(null),f=async(e,i)=>{let n=await h(e);n.comment&&(t(n.comment),i())},x=(0,K.i)(d,r,u?void 0:(0,n.jsx)(J,{redirectUrl:l.fV?.href}),"commit");return(0,n.jsx)("div",{className:"d-flex flex-column gap-2 pt-3",children:s?(0,n.jsx)(Z,{commitOid:e,commentEditor:p,onExpandEditor:i,onSave:f,newCommentContent:o,avatarURL:c||W.t.ghostUser.avatarUrl}):(0,n.jsx)(Q.P,{icon:m.LockIcon,reason:x})})}function Z(e){let[t,i]=(0,a.useState)(()=>void 0!==e.newCommentContent),[s,r]=(0,a.useState)(e.newCommentContent);t||void 0===e.newCommentContent||s===e.newCommentContent||(i(!0),r(e.newCommentContent));let l="Comment";return t?(0,n.jsx)("div",{id:o.Bq.issueCommentComposer,children:(0,n.jsx)(D,{commitOid:e.commitOid,ref:e.commentEditor,onSave:e.onSave,referenceId:`new-discussion-comment-${e.commitOid}`,commentContent:e.newCommentContent,initialMarkdown:e.newCommentContent,buttonText:l,onCancel:()=>{i(!1)}})}):(0,n.jsxs)("div",{id:o.Bq.issueCommentComposer,className:"d-flex flex-items-center border rounded-2 p-2 gap-2 color-bg-subtle",children:[(0,n.jsx)(Y.r,{src:e.avatarURL,size:20}),(0,n.jsx)(G.z,{onClick:()=>{i(!0),e.onExpandEditor?.()},children:l})]})}function J({redirectUrl:e}){return(0,n.jsxs)("span",{children:["Please ",(0,n.jsx)("a",{href:e?`/login?return_to=${e}`:"/login",children:"sign in"})," to comment."]})}try{q.displayName||(q.displayName="NewCommitComment")}catch{}try{Z.displayName||(Z.displayName="CompactEditor")}catch{}try{J.displayName||(J.displayName="LoggedOutMessage")}catch{}var ee=i(10925);let et=(0,a.forwardRef)(({commitOid:e,subscribed:t},i)=>{let o,[r,l]=(0,a.useState)(t),[d,u]=(0,a.useState)(!1),h=(0,s.t)(),p=(0,ee.H)("/notifications/thread","post");o=d?`You're now ${r?"subscribed":"unsubscribed"} to this thread.`:r?"You're receiving notifications because you're subscribed to this thread.":"You're not receiving notifications from this thread.";let f=async()=>{let t=new FormData;t.append("repository_id",h.id.toString()),t.append("thread_id",e),t.append("thread_class","Commit"),t.append("id",r?"unsubscribe":"subscribe"),t.append("authenticity_token",p??""),(await (0,H.DI)("/notifications/thread",{method:"POST",body:t})).ok&&(l(!r),u(!0))};return(0,n.jsxs)("div",{className:"d-flex flex-items-center border rounded-2 p-2 gap-2",ref:i,children:[(0,n.jsx)(c.Q,{onClick:f,size:"small",leadingVisual:r?m.BellSlashIcon:m.BellIcon,children:r?"Unsubscribe":"Subscribe"}),(0,n.jsx)("p",{role:"status",className:"f6 fgColor-muted mb-0",children:o})]})});et.displayName="NotificationsFooter";let ei="comments";function en(e){return(0,n.jsx)("div",{className:(0,h.$)("d-flex flex-column gap-2 pt-3",o.mU.commentsContainer,x["commit-discussion-comments"]),id:ei,children:(0,a.createElement)(ea,{...e,key:e.commit.oid})})}function ea({commit:e,commentInfo:t,repoOwnerGlobalRelayId:i}){let o=(0,s.t)(),m=(0,r.i)(),{retry:u,loadMore:h,canLoadMore:y,addComment:C,deleteComment:w,updateComment:v,count:j,comments:b,subscribed:N,providerState:k}=(0,p.y)(),[I,S]=(0,a.useState)(void 0),[_,T]=(0,a.useState)(t.locked),A=(0,a.useMemo)(()=>(0,f.N)(e.oid,o.id),[e.oid,o.id]),B=(0,a.useRef)(null);(0,a.useEffect)(()=>{if(l.cg?.location.hash){let e=l.cg.location.hash.slice(1);if(b.find(t=>t.urlFragment===e)){let t=document.getElementById(e);t&&(t.scrollIntoView(),t.focus())}}},[b]);let R=(0,a.useCallback)(()=>{setTimeout(()=>B.current?.scrollIntoView({behavior:"smooth",block:"nearest"}),0)},[]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(eo,{commitOid:e.oid,commentCount:j,canLock:t.canLock,locked:_,setLocked:T}),"loading"===k&&(0,n.jsx)(g,{}),"error"===k&&(0,n.jsxs)(d.A,{className:"d-flex flex-justify-between flex-items-center",variant:"danger",children:[(0,n.jsx)("span",{children:"Failed to load comments."}),(0,n.jsx)(c.Q,{onClick:()=>u(),children:"Retry"})]}),"loaded"===k&&y&&(0,n.jsx)(c.Q,{className:"width-full",onClick:()=>h(),children:"Load more comments"}),(0,n.jsx)(L,{comments:b,commit:e,locked:_,repoOwnerGlobalRelayId:i,deleteComment:w,updateComment:v,setNewCommentContent:S}),A?(0,n.jsx)("div",{className:"text-center",children:[...Array(38)].map((e,t)=>(0,n.jsx)("img",{alt:"rose",src:"/images/icons/emoji/rose.png",className:x["discussion-comments-rose"]},`rose-${t}`))}):null,"loaded"===k||0!==b.length?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(q,{commitOid:e.oid,onAddComment:C,onExpandCommentEditor:R,newCommentContent:I,canComment:t.canComment,locked:_,repoArchived:t.repoArchived,avatarURL:m?.avatarURL}),m?(0,n.jsx)(et,{ref:B,commitOid:e.oid,subscribed:N??!1}):null]}):null]})}function eo({commitOid:e,commentCount:t,locked:i,setLocked:o,canLock:s}){let[r,l]=(0,a.useState)(!1);return(0,n.jsxs)("div",{className:"d-flex flex-items-center flex-justify-between",children:[(0,n.jsxs)("h2",{className:"sr-only",children:[t," commit comments"]}),(0,n.jsxs)("div",{className:"d-flex flex-items-center",children:[(0,n.jsx)("div",{className:"h4 pr-2",children:"Comments"}),void 0!==t&&(0,n.jsx)(u.A,{children:t})]}),s&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(c.Q,{leadingVisual:i?m.KeyIcon:m.LockIcon,variant:"invisible",onClick:()=>l(!0),children:[i?"Unlock":"Lock"," conversation"]}),r&&(0,n.jsx)(V,{commitOid:e,locked:i,onClose:e=>{l(!1),void 0!==e&&o(e)}})]})]})}try{en.displayName||(en.displayName="DiscussionComments")}catch{}try{ea.displayName||(ea.displayName="DiscussionCommentsInternal")}catch{}try{eo.displayName||(eo.displayName="DiscussionCommentsHeader")}catch{}},48926:(e,t,i)=>{i.d(t,{C:()=>d,j:()=>m});var n=i(74848),a=i(61200),o=i(81945),s=i(54571),r=i(89169),l=i(4095);function m({commit:e,repo:t,children:i,settings:m,textVariant:d}){let c=(0,l.NO)(e.oid),[u]=(0,s.I)(()=>!1,!0,[]);return(0,n.jsxs)(a.jF,{authors:e.authors,committer:e.committer,committerAttribution:e.committerAttribution,onBehalfOf:c?.onBehalfOf,repo:t,includeVerbs:!0,authorSettings:{fontWeight:"normal",fontColor:"fg.muted",avatarSize:16,...m},textVariant:d,children:[!u&&(0,n.jsx)(r.A,{className:"pl-1",datetime:e.committedDate}),u&&(0,n.jsx)(o.O,{variant:"rounded",className:"d-none d-sm-flex ml-1",width:"60px"}),i]})}function d({commit:e,repo:t,textVariant:i}){let[l]=(0,s.I)(()=>!1,!0,[]);return(0,n.jsxs)(a.Cf,{pusher:e.pusher,repo:t,textVariant:i,children:[!l&&(0,n.jsx)(r.A,{className:"pl-1",datetime:e.pushedDate}),l&&(0,n.jsx)(o.O,{variant:"rounded",className:"d-none d-sm-flex ml-1",width:"60px"})]})}try{m.displayName||(m.displayName="CommitAttribution")}catch{}try{d.displayName||(d.displayName="PushAttribution")}catch{}},89830:(e,t,i)=>{i.d(t,{s:()=>p});var n=i(74848),a=i(38621),o=i(98130),s=i(63557),r=i(30729),l=i(34164);let m={timelineRowItem:"TimelineRow-module__timelineRowItem--EN_EF",timelineRowBadge:"TimelineRow-module__timelineRowBadge--Lyy1u"},d={none:{},bottom:{pb:0},top:{pt:0}},c=()=>(0,n.jsx)(r.A,{icon:a.GitCommitIcon});function u({children:e,leadingVisual:t,clipTimeline:i="none",sx:a,className:s}){let r=d[i];return(0,n.jsxs)(o.A.Item,{sx:{...r,...a},className:(0,l.$)(s,m.timelineRowItem),children:[(0,n.jsx)(o.A.Badge,{className:m.timelineRowBadge,children:t??(0,n.jsx)(c,{})}),(0,n.jsx)(o.A.Body,{className:"mt-0",children:e})]})}function h({title:e,as:t,...i}){return(0,n.jsx)(s.A,{as:t,className:"text-normal f5 py-1",...i,children:e})}let p=Object.assign(u,{Heading:h});try{c.displayName||(c.displayName="DefaultLeadingVisual")}catch{}try{u.displayName||(u.displayName="TimelineRowComponent")}catch{}try{h.displayName||(h.displayName="TimelineRowHeading")}catch{}try{p.displayName||(p.displayName="TimelineRow")}catch{}},43147:(e,t,i)=>{i.d(t,{w:()=>l});var n=i(74848),a=i(98755),o=i(30459),s=i(16790),r=i(68534);function l({sha:e,direction:t="s"}){let{sendAnalyticsEvent:i}=(0,o.s)(),{loggingPrefix:l,loggingPayload:m}=(0,s.xe)(),d=(0,s.eX)();return(0,n.jsx)("div",{onClick:()=>{d&&i(`${l}click`,"COPY_SHA_CLICKED",m)},children:(0,n.jsx)(a.T,{textToCopy:e,ariaLabel:`Copy full SHA for ${(0,r.F)(e)}`,tooltipProps:{direction:t},size:"small"})})}try{l.displayName||(l.displayName="CopySHA")}catch{}},76214:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(74848),a=i(34164);function o({children:e,className:t=""}){return(0,n.jsx)("div",{className:(0,a.$)("color-bg-default position-relative border rounded-2 color-border-default mt-2 d-flex flex-column",t),children:e})}try{o.displayName||(o.displayName="Panel")}catch{}},16790:(e,t,i)=>{i.d(t,{eX:()=>r,xe:()=>l,zq:()=>s});var n=i(74848),a=i(96540);let o=(0,a.createContext)({loggingPayload:void 0,loggingPrefix:void 0});function s({children:e,loggingInfo:t}){return(0,n.jsx)(o.Provider,{value:t,children:e})}function r(){let e=(0,a.useContext)(o);return void 0!==e.loggingPayload&&void 0!==e.loggingPrefix}function l(){return(0,a.useContext)(o)}try{o.displayName||(o.displayName="CommitsLoggingContext")}catch{}try{s.displayName||(s.displayName="CommitsLoggingInfoProvider")}catch{}},4095:(e,t,i)=>{i.d(t,{M2:()=>l,NO:()=>m,UI:()=>o,Xx:()=>s,ej:()=>c,xs:()=>d});var n=i(74848),a=i(96540);let o={deferredCommits:[],renameHistory:null,loading:!0},s={deferredCommits:[],renameHistory:null,loading:!1},r=(0,a.createContext)(o);function l({children:e,deferredData:t}){return(0,n.jsx)(r.Provider,{value:t,children:e})}function m(e){let t=(0,a.useContext)(r),i=t.error,n=t.deferredCommits?.find(t=>t?.oid===e);return i&&void 0===n&&(n={oid:e,statusCheckStatus:void 0}),n}function d(){return(0,a.useContext)(r).loading}function c(){return(0,a.useContext)(r).renameHistory}try{r.displayName||(r.displayName="DeferredCommitDataContext")}catch{}try{l.displayName||(l.displayName="DeferredCommitDataProvider")}catch{}},21935:(e,t,i)=>{i.d(t,{c:()=>d,y:()=>c});var n,a=i(74848),o=i(73189),s=i(25407),r=i(96379),l=i(96540);let m=(0,l.createContext)({comments:[],addComment:o.l,deleteComment:o.l,updateComment:o.l,loadMore:o.l,retry:o.l,canLoadMore:!1,count:0,subscribed:!1,providerState:"initial"});function d({children:e,comments:t=[],commentCount:i=0,canLoadMore:n=!1,subscribed:o=!1,providerState:d="initial",repo:c,commitOid:u}){let[h,p]=(0,l.useState)(t),[f,x]=(0,l.useState)(i),[y,C]=(0,l.useState)(n),[g,w]=(0,l.useState)(d),[v,j]=(0,l.useState)(o);(0,l.useEffect)(()=>{x(i),p(t),C(n),j(o),w(d)},[d]);let b=(0,l.useCallback)(async e=>{w("loading");let t=await (0,r.Sr)((0,s.Mo3)({owner:c.ownerLogin,repo:c.name,commitOid:u,beforeCommentId:e}));if(t.ok){let i=await t.json();e?p(e=>[...i.comments,...e]):p(i.comments),w("loaded"),x(i.count),j(i.subscribed),C(i.canLoadMore)}else w("error")},[c.ownerLogin,c.name,u]),N=(0,l.useCallback)(()=>{let e=h[0];e&&y&&b(e.id.toString())},[y,h,b]),k=(0,l.useCallback)(e=>{p([...h,e]),x((f??0)+1)},[h,f]),I=(0,l.useCallback)(e=>{p(h.filter(t=>t.id!==e)),x((f??0)-1)},[h,f]),S=(0,l.useCallback)(e=>{p(h.map(t=>t.id===e.id?e:t))},[h]),_=(0,l.useMemo)(()=>({addComment:k,canLoadMore:y,comments:h,count:f,deleteComment:I,loadMore:N,retry:b,subscribed:v,providerState:g,updateComment:S}),[k,y,h,f,I,b,N,g,v,S]);return(0,a.jsx)(m.Provider,{value:_,children:e})}function c(){let e=(0,l.useContext)(m);if(!e)throw Error("useDiscussionComments must be used within a DiscussionCommentsProvider");return e}try{m.displayName||(m.displayName="DiscussionCommentsContext")}catch{}try{d.displayName||(d.displayName="DiscussionCommentsProvider")}catch{}try{(n=DiscussionComments).displayName||(n.displayName="DiscussionComments")}catch{}},28014:(e,t,i)=>{i.d(t,{B:()=>d,r:()=>m});var n=i(74848),a=i(73189),o=i(96540);let s=(0,o.createContext)({comments:[],addComments:a.l,findInlineComment:()=>void 0,findInlineCommentWithRelay:()=>void 0,getCommentCountByPath:()=>0,getThreadDataByPathAndPosition:()=>void 0,updateInlineCommentMapWithNewComment:()=>void 0,getInlineCommentInfoByPathAndPosition:()=>void 0});function r(e){return e.reduce((e,t)=>(e.set(`${t.path}::${t.position}`,t),e),new Map)}function l(e){let t=new Map;for(let i in e)if(e.hasOwnProperty(i)){let n=new Map;for(let t in e[i])e[i].hasOwnProperty(t)&&n.set(Number(t),e[i][Number(t)]);t.set(i,n)}return t}function m({children:e,initialFiles:t,initialExpandedThreadId:i,initialInlineComments:a}){let[m,d]=(0,o.useState)(()=>a?Object.values(a).flatMap(e=>Array.from(Object.values(e).flat())):[]),[c,u]=(0,o.useState)(t??[]),[h,p]=(0,o.useState)(()=>t?r(t):new Map),[f,x]=(0,o.useState)(()=>a?l(a):new Map),y=(0,o.useCallback)((e,t,i,n)=>{if(n){let n=f.get(e)?.get(t)??[];n=n.concat(i);let a=f.get(e)?.set(t,n);x(f.set(e,a??new Map)??f)}else{let n=f.get(e)?.set(t,i);x(f.set(e,n??new Map)??f)}},[f]);(0,o.useEffect)(()=>{u(t??[]),p(t?r(t):new Map),x(a?l(a):new Map),d(a?Object.values(a).flatMap(e=>Array.from(Object.values(e).flat())):[])},[t,a]);let C=(0,o.useCallback)((e,t,i)=>{let n=e.map(e=>e.id),a=m.filter(e=>!n.includes(e.id)),o=c.filter(e=>e.path!==t||e.position!==parseInt(i)),s={path:t,position:parseInt(i),count:e.length,threads:[{id:`${t}::${i}`,diffSide:"RIGHT",commentsData:{totalCount:e.length,comments:e.map(e=>({id:e.id,author:{avatarUrl:e?.author?.avatarUrl??"",login:e?.author?.login??"",url:""}}))}}]};d([...a,...e]),u([...o,s]),p(r([...o,s])),y(t,parseInt(i),e,!1)},[c,m,y]),g=(0,o.useCallback)(e=>{if(e)return m.find(t=>t.id===e)},[m]),w=(0,o.useCallback)(e=>m.find(t=>t.relayId===e),[m]),v=(0,o.useCallback)(e=>{let t=0;for(let i of c)i.path===e&&(t+=i.count);return t},[c]),j=(0,o.useCallback)((e,t)=>h.get(`${e}::${t}`),[h]),b=(0,o.useCallback)((e,t)=>f.get(e)?.get(t),[f]),N=(0,o.useMemo)(()=>({comments:m,addComments:C,findInlineComment:g,findInlineCommentWithRelay:w,getCommentCountByPath:v,getThreadDataByPathAndPosition:j,getInlineCommentInfoByPathAndPosition:b,updateInlineCommentMapWithNewComment:y,initialExpandedThreadId:i}),[C,m,g,w,v,j,b,y,i]);return(0,n.jsx)(s.Provider,{value:N,children:e})}function d(){let e=(0,o.useContext)(s);if(!e)throw Error("useInlineComments must be used within a InlineCommentsProvider");return e}try{s.displayName||(s.displayName="InlineCommentsContext")}catch{}try{m.displayName||(m.displayName="InlineCommentsProvider")}catch{}},34745:(e,t,i)=>{i.d(t,{f:()=>J});var n=i(74848),a=i(44569),o=i(71315),s=i(96459),r=i(98130),l=i(96540),m=i(97174),d=i(76214);let c={panel:"CommitGroup-module__panel--Agk7V"};var u=i(4559),h=i(99896),p=i(2970),f=i(98994),x=i(43617),y=i(4929),C=i(95378),g=i(73017),w=i(30459),v=i(54571),j=i(16790),b=i(4095),N=i(48926),k=i(25407),I=i(66108),S=i(38621),_=i(55847),T=i(87330),A=i(94977),B=i(3614),R=i(68534),D=i(1117);let E=l.memo(L);function L({repo:e,oid:t}){let i=`browse-repo-${(0,R.F)(t)}`,{sendAnalyticsEvent:a}=(0,w.s)(),{loggingPrefix:o,loggingPayload:s}=(0,j.xe)(),r=(0,j.eX)();return(0,n.jsx)(A.A,{"aria-label":"Browse repository at this point",id:i,direction:"sw",children:(0,n.jsx)("a",{"aria-labelledby":i,href:(0,k.IO9)({repo:e,action:"tree",commitish:t}),className:"Button Button--iconOnly Button--invisible Button--small","data-testid":"commit-row-browse-repo",onClick:()=>{r&&a(`${o}click`,"COMMITS_BROWSE_REPOSITORY_AT_THIS_POINT_CLICKED",s)},children:(0,n.jsx)(S.CodeIcon,{})})})}let O=l.memo(M);function M({repo:e,oid:t,path:i}){if(!i)return null;let a=`view-code-${(0,R.F)(t)}`;return(0,n.jsx)(A.A,{"aria-label":"View code at this point",id:a,direction:"sw",children:(0,n.jsx)("a",{"aria-labelledby":a,href:(0,k.nD_)({owner:e.ownerLogin,repo:e.name,commitish:t,filePath:i}),className:"Button Button--iconOnly Button--invisible Button--small","data-testid":"commit-row-view-code",children:(0,n.jsx)(S.FileCodeIcon,{})})})}function $({commitUrl:e,oid:t,softNavToCommit:i}){let a={variant:"invisible",size:"small",sx:{fontFamily:"var(--fontStack-monospace)",color:"fg.muted"}};return(0,n.jsx)(A.A,{"aria-label":"View commit details",direction:"s",children:i?(0,n.jsx)(_.Q,{as:I.N,to:e,...a,children:(0,R.F)(t)}):(0,n.jsx)("a",{className:"Button--invisible Button--small Button text-mono",href:e,...a,children:(0,n.jsx)("span",{className:"Button-content",children:(0,n.jsx)("span",{className:"Button-label color-fg-muted",children:(0,R.F)(t)})})})})}function P({showDescription:e,setShowDescription:t,oid:i}){let a=(0,R.F)(i),o=`show-description-${a}`,s=`${!e?"Show":"Hide"} description for ${a}`;return(0,n.jsx)(B.m,{id:o,text:s,"aria-label":s,children:(0,n.jsx)(T.K,{icon:S.EllipsisIcon,className:"Button Button--iconOnly Button--invisible Button--small ml-1","data-testid":"commit-row-show-description-button","aria-labelledby":o,"aria-pressed":e,"aria-expanded":e,onClick:i=>{i.preventDefault(),t(!e)}})})}function F({count:e,repo:t,oid:i}){if(!e)return null;let a=`comment-count-${(0,R.F)(i)}`;return(0,n.jsx)(A.A,{"aria-label":`View ${e} commit comment${e>1?"s":""}`,id:a,direction:"sw",children:(0,n.jsx)("a",{"aria-labelledby":a,href:`${(0,k.$Qz)({owner:t.ownerLogin,repo:t.name,commitish:i})}#${D.N}`,className:"Button Button--invisible Button--small","data-testid":"commit-row-comments",children:(0,n.jsxs)("span",{className:"Button-content color-fg-muted",children:[(0,n.jsx)(S.CommentIcon,{}),(0,n.jsx)("span",{className:"Button-label",children:e})]})})})}try{E.displayName||(E.displayName="BrowseRepositoryAtThisPoint")}catch{}try{L.displayName||(L.displayName="WrappedBrowseRepositoryAtThisPoint")}catch{}try{O.displayName||(O.displayName="ViewCodeAtThisPoint")}catch{}try{M.displayName||(M.displayName="WrappedViewCodeAtThisPoint")}catch{}try{$.displayName||($.displayName="ViewCommitDetails")}catch{}try{P.displayName||(P.displayName="ToggleCommitDescription")}catch{}try{F.displayName||(F.displayName="CommitCommentCount")}catch{}var U=i(44185),H=i(81945),z=i(98783),V=i(42257);function X({deferredData:e}){let{helpUrl:t}=(0,z.D)(),i=(0,b.xs)();return(0,n.jsxs)(n.Fragment,{children:[i&&(0,n.jsx)(H.O,{variant:"rounded",className:"d-none d-sm-flex",width:"62px"}),!i&&void 0===e&&(0,n.jsx)(H.O,{variant:"rounded",className:"d-none d-sm-flex",width:"62px"}),!i&&e&&(0,n.jsx)(U.h,{commitOid:e.oid,hasSignature:!0,verificationStatus:e.verifiedStatus,signature:e.signatureInformation?{helpUrl:t,...e.signatureInformation}:void 0})]})}function Q({deferredData:e,oid:t,repository:i}){let a=(0,b.xs)(),o="";try{o=e?.statusCheckStatus?.short_text?.split("checks")[0]?.trim()||""}catch{}return(0,n.jsxs)(n.Fragment,{children:[a&&(0,n.jsx)(H.O,{variant:"rounded",className:"d-none d-sm-flex ml-2",width:"20px"}),!a&&void 0===e&&(0,n.jsx)(H.O,{variant:"rounded",className:"d-none d-sm-flex ml-2",width:"20px"}),!a&&e?.statusCheckStatus&&(0,n.jsx)("div",{className:"d-none d-sm-flex ml-1",children:"\xb7"}),(0,n.jsx)("div",{className:"d-none d-sm-flex",children:(0,n.jsx)(V.d,{oid:t,status:e?.statusCheckStatus?.state,descriptionString:o,repo:i})})]})}try{X.displayName||(X.displayName="SignedCommitBadge")}catch{}try{Q.displayName||(Q.displayName="CommitChecksStatusBadge")}catch{}var K=i(43147);let G={ListItemTitle_0:"CommitRow-module__ListItemTitle_0--xTKIC",ListItem_0:"CommitRow-module__ListItem_0--Iwpdk",ListItemMetadata_0:"CommitRow-module__ListItemMetadata_0--Tnt1n"},W=(0,l.lazy)(()=>i.e("packages_commits_components_Commits_CommitActionBar_tsx").then(i.bind(i,22220)).then(e=>({default:e.CommitActionBar})));function Y({commit:e,repo:t,path:i,softNavToCommit:a}){let[o,s]=(0,l.useState)(!1),r=(0,l.useRef)(null),[m,d]=(0,h.ym)(e.oid,t),[c,k]=(0,l.useState)(!1),I=(0,b.NO)(e.oid),[S]=(0,v.I)(()=>!1,!0,[]),{sendAnalyticsEvent:_}=(0,w.s)(),{loggingPrefix:T,loggingPayload:A}=(0,j.xe)(),B=(0,j.eX)(),R=()=>{B&&_(`${T}click`,"COMMITS_TITLE_CLICKED",A)};return(0,l.useEffect)(()=>{o&&r.current&&r.current.textContent&&(0,u.i)(r.current.textContent)},[r,o]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(p.c,{"data-testid":"commit-row-item","data-commit-link":e.url,title:e.shortMessageMarkdownLink&&!S?(0,n.jsx)(C.kx,{html:e.shortMessageMarkdownLink,onClick:R,containerClassName:G.ListItemTitle_0,headingClassName:G.ListItemTitle_0,children:e.bodyMessageHtml&&(0,n.jsx)(P,{showDescription:o,setShowDescription:s,oid:e.oid})}):(0,n.jsx)(C.ao,{value:e.shortMessage,href:e.url,onClick:R,containerClassName:G.ListItemTitle_0,headingClassName:G.ListItemTitle_0,children:e.bodyMessageHtml&&(0,n.jsx)(P,{showDescription:o,setShowDescription:s,oid:e.oid})}),metadata:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(y.V,{children:(0,n.jsx)(F,{oid:e.oid,repo:t,count:I?.commentCount??0})}),(0,n.jsx)(y.V,{className:G.ListItemMetadata_0,children:(0,n.jsx)(X,{deferredData:I})}),(0,n.jsxs)(y.V,{className:"d-none d-sm-flex px-0 gap-2",variant:"primary",children:[(0,n.jsxs)("div",{className:"d-flex",children:[(0,n.jsx)($,{oid:e.oid,commitUrl:e.url,softNavToCommit:a}),(0,n.jsx)(K.w,{sha:e.oid})]}),(0,n.jsx)(O,{repo:t,oid:e.oid,path:i}),(0,n.jsx)(E,{repo:t,oid:e.oid})]})]}),secondaryActions:(0,n.jsx)(l.Suspense,{children:(0,n.jsx)(W,{commit:e,repo:t,path:i,setDialogOpen:k,fetchCheckDetails:d,deferredData:I})}),className:G.ListItem_0,children:[(0,n.jsx)("div",{className:"px-1"}),(0,n.jsxs)(x.Q,{children:[o&&e.bodyMessageHtml&&(0,n.jsx)(f.U,{children:(0,n.jsx)(g.JR,{ref:r,html:e.bodyMessageHtml,className:"ws-pre-wrap extended-commit-description-container pb-2 text-mono wb-break-word"})}),(0,n.jsx)(f.U,{children:(0,n.jsx)(N.j,{commit:e,repo:t,children:(0,n.jsx)(Q,{repository:t,deferredData:I,oid:e.oid})})})]})]}),I?.statusCheckStatus&&c&&(0,n.jsx)(h.xC,{combinedStatus:m,isOpen:c,onDismiss:()=>{k(!1)}})]})}try{W.displayName||(W.displayName="CommitActionBar")}catch{}try{Y.displayName||(Y.displayName="CommitRow")}catch{}var q=i(89830);function Z({commits:e,title:t,shouldClipTimeline:i,repo:a,currentBlobPath:o="",softNavToCommit:s}){let r=(0,l.useId)();return(0,n.jsxs)(q.s,{clipTimeline:i?"top":"none",children:[(0,n.jsx)(q.s.Heading,{as:"h3",id:r,title:`Commits on ${t}`,"data-testid":"commit-group-title"}),(0,n.jsx)(d.Z,{className:c.panel,children:(0,n.jsx)(m.u,{title:t,titleHeaderTag:"h3",ariaLabelledBy:r,children:e.map(e=>(0,n.jsx)(Y,{commit:e,repo:a,path:o,softNavToCommit:s},e.oid))},t)})]})}try{Z.displayName||(Z.displayName="CommitGroup")}catch{}function J({leadingContent:e,commitGroups:t,trailingContent:i,deferredCommitData:m=b.Xx,repository:d,currentBlobPath:c,loggingPayload:u,loggingPrefix:h,shouldClipTimeline:p=!0,softNavToCommit:f=!1}){let x=(0,l.useRef)(0),y=(0,l.useRef)(null),C=(0,l.useRef)(null),g=(0,l.useRef)(!1),w=(0,l.useRef)([]),v=(0,s.Z)();return(0,l.useEffect)(()=>{let e=setTimeout(()=>{w.current=Array.from(document.querySelectorAll('[id*="-list-view-node-"]'))},0);return()=>clearTimeout(e)},[t]),(0,n.jsx)(b.M2,{deferredData:m,children:(0,n.jsx)(j.zq,{loggingInfo:{loggingPayload:u,loggingPrefix:h},children:(0,n.jsxs)(r.A,{clipSidebar:!0,onKeyDown:e=>{var t;"Enter"===e.key?(e=>{if("Enter"===e.key){let t=o.XC?.activeElement?.hasAttribute("data-commit-link")?o.XC?.activeElement?.getAttribute("data-commit-link"):void 0;t&&(e.ctrlKey||e.metaKey?o.cg?.open(t,"_blank"):v(t))}})(e):"Tab"===e.key?"Tab"===(t=e).key&&(t.shiftKey?(o.XC?.activeElement?.hasAttribute("data-commit-link")&&!g.current&&y.current&&(y.current.focus(),C.current=y.current),g.current=!0):(y.current=C.current,C.current=o.XC?.activeElement??null,g.current=!1)):(e=>{if(!["j","k","ArrowDown","ArrowUp"].includes(e.key)||!(0,a.zw)()&&("j"===e.key||"k"===e.key))return;let t=1;for(let e=0;e<w.current.length;e++)w.current[e]?.contains(o.XC?.activeElement)&&(t=e+1);let i=!1;if(("ArrowUp"===e.key||"k"===e.key)&&(i=!0),x.current!==t)x.current=t;else{let e=w.current[i?t-2:t];e?.focus(),e?.focus(),x.current=i?t-1:t+1}})(e)},children:[e,t.map((e,t)=>(0,n.jsx)(Z,{title:e.title,commits:e.commits,shouldClipTimeline:p&&0===t,currentBlobPath:c,repo:d,softNavToCommit:f},e.title)),i]})})})}try{J.displayName||(J.displayName="Commits")}catch{}},57028:(e,t,i)=>{i.d(t,{M:()=>c});var n=i(74848),a=i(40260),o=i(73189),s=i(38621),r=i(24815),l=i(88657),m=i(76214);let d={timeout:{description:"Try reloading the page, or if the problem persists, view the history locally using this command:",heading:"Commit history cannot be loaded",icon:(0,n.jsx)(s.AlertIcon,{size:"medium",className:"mb-2 fgColor-muted"}),showTextInput:!0},unavailable:{description:"There isn't any commit history to show here.",heading:"No commits history",icon:(0,n.jsx)(s.GitCommitIcon,{size:"medium"}),showTextInput:!1}};function c({timeoutMessage:e,unavailableMessage:t}){let i=d[""!==e?"timeout":"unavailable"],c=t??i.description;return(0,n.jsx)(m.Z,{children:(0,n.jsx)("div",{"data-hpc":!0,children:(0,n.jsxs)(l.E,{border:!1,spacious:!0,children:[(0,n.jsx)(l.E.Visual,{children:i.icon}),(0,n.jsx)(l.E.Heading,{children:i.heading}),(0,n.jsx)(l.E.Description,{children:c}),i.showTextInput&&(0,n.jsx)(r.A,{"aria-label":"View commit history locally command",className:"d-flex flex-justify-center mt-2",monospace:!0,onChange:o.l,readOnly:!0,size:"large",trailingAction:(0,n.jsx)(r.A.Action,{onClick:()=>(0,a.D)(e),icon:s.CopyIcon,"aria-label":"Copy to clipboard",className:"fgColor-muted"}),value:e})]})})})}try{c.displayName||(c.displayName="CommitsBlankState")}catch{}}}]);
//# sourceMappingURL=packages_commits_shared_use-load-deferred-commit-data_ts-packages_commits_shared_Commits_tsx--f64111-06b4cce56b63.js.map